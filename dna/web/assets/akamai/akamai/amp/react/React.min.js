!function(e){"use strict";var t=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];babelHelpers.classCallCheck(this,e),this.component=t,this.tokens=a}return babelHelpers.createClass(e,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.contains(e)||(t===!0?this.tokens.unshift(e):this.tokens.push(e))}},{key:"contains",value:function(e){return this.tokens.indexOf(e)!==-1}},{key:"item",value:function(e){return this.tokens[e]||null}},{key:"remove",value:function(e){var t=this.tokens.indexOf(e);t!==-1&&this.tokens.splice(t,1)}},{key:"toggle",value:function(e){this.contains(e)?this.remove(e):this.add(e)}},{key:"update",value:function(e){for(var t in e)e[t]?this.add(t):this.remove(t);var a=this.toString();a!=this.component.state.className&&this.component.setState({className:a})}},{key:"toString",value:function(){return this.tokens.join(" ")}}]),e}(),a=function(e){function a(e,n){babelHelpers.classCallCheck(this,a);var s=babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,n));return s.state={l10n:s.player.l10n},s.classList=new t(s,s.props.classList),s}return babelHelpers.inherits(a,e),babelHelpers.createClass(a,[{key:"getLocalizedString",value:function(e){return this.player.getLocalizedString(e)}},{key:"onlanguagechange",value:function(){this.setState({l10n:this.player.l10n})}},{key:"bindHandlers",value:function(e){var t=this;null==e||e.length<=0||e.forEach(function(e){"function"==typeof t[e]&&(t[e]=t[e].bind(t))})}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.state,n=this.props;if(null!=t)for(var s in t)if(t[s]!=a[s])return!0;if(null!=e)for(var i in e)if(e[i]!=n[i])return!0;return!1}},{key:"componentWillMount",value:function(){var e=this;this.playerEventMap.forEach(function(t){e[t.key]=e[t.key].bind(e),e.player.addEventListener(t.type,e[t.key])})}},{key:"componentWillUnmount",value:function(){var e=this;this.playerEventMap.forEach(function(t){e.player.removeEventListener(t.type,e[t.key])})}},{key:"render",value:function(){return React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{className:this.className}),this.textContent,this.children)}},{key:"player",get:function(){return this.props.player||this.context.player}},{key:"config",get:function(){return this.props.config||this.context.config}},{key:"l10n",get:function(){return this.state.l10n}},{key:"plugin",get:function(){return this.context.plugin}},{key:"className",get:function(){var e=this.props.className||"";return e+=" "+this.classList,e.trim()}},{key:"textContent",get:function(){return this.props.textContent||this.state.textContent}},{key:"children",get:function(){return this.props.children||[]}},{key:"element",get:function(){return this.refs.element}},{key:"dom",get:function(){return this.element||ReactDOM.findNode(this)}},{key:"data",get:function(){return this.props.data||{}}},{key:"playerEventMap",get:function(){var e=this,t=[];return null==this.player?t:(Object.values(akamai.amp.Events).forEach(function(a){var n="on"+a;"function"==typeof e[n]&&t.push({key:n,type:a})}),t)}},{key:"propsList",get:function(){var e=this.props,t=(e.className,e.classList,e.data,e.textContent,babelHelpers.objectWithoutProperties(e,["className","classList","data","textContent"]));return t}}],[{key:"contextTypes",get:function(){return{player:PropTypes.object,config:PropTypes.object,plugin:PropTypes.object}}}]),a}(React.Component),n=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.components=[],n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"addComponent",value:function(e){var t=this.state.components.slice();null==e.key&&(e.key=akamai.amp.Utils.createUID()),t.push(e),this.setState({components:t})}},{key:"removeComponent",value:function(e){var t=this.state.components.filter(function(t){return t!=e});this.setState({components:t})}},{key:"clear",value:function(){this.setState({components:[]})}},{key:"appendChild",value:function(e){var t=this.dom;null!=t&&t.appendChild(e)}},{key:"removeChild",value:function(e){var t=this.dom;null!=t&&t.removeChild(e)}},{key:"components",get:function(){return this.state.components}},{key:"children",get:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"children",this).concat(this.state.components)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),s=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-icon"),n.classList.add("amp-control"),n.mouseFocus=!1,n.focused=!1,n.state.altText=n.altText,n.bindHandlers(["onMouseDown","onMouseUp","onMouseOver","onMouseOut","onFocus","onBlur","onKeyDown","onClick","onChange"]),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onMouseDown",value:function(e){this.mouseFocus=!0}},{key:"onMouseUp",value:function(e){this.mouseFocus=!1}},{key:"onMouseOver",value:function(e){}},{key:"onMouseOut",value:function(e){}},{key:"onFocus",value:function(e){1!=this.mouseFocus&&(this.focused=!0,this.classList.update({"amp-focus":!0}),this.player.viewComponent.scrollTop=0)}},{key:"onBlur",value:function(e){1!=this.mouseFocus&&(this.focused=!1,this.classList.update({"amp-focus":!1}))}},{key:"onKeyDown",value:function(e){1!=this.mouseFocus&&(this.onKeyPress(e),"keypress"!=e.type||13!=e.keyCode&&32!=e.keyCode||this.onAction())}},{key:"onAction",value:function(){this.onClick()}},{key:"onKeyPress",value:function(e){}},{key:"onClick",value:function(e){}},{key:"change",value:function(e){var t=this.propsList.onChange||this.onChange;"function"==typeof t&&t(e)}},{key:"render",value:function(){return React.createElement("button",babelHelpers.extends({ref:"element"},this.propsList,{className:this.className}),this.textContent,this.children)}},{key:"aria",get:function(){return{"aria-label":this.title,role:"button"}}},{key:"propsList",get:function(){var e=this,a=babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propsList",this),n=(a.altText,babelHelpers.objectWithoutProperties(a,["altText"]));n.className=this.className,n.tabIndex="0",n.onMouseDown=function(t){return(e.props.onMouseDown||e.onMouseDown)(t)},n.onMouseUp=function(t){return(e.props.onMouseUp||e.onMouseUp)(t)},n.onMouseOver=function(t){return(e.props.onMouseOver||e.onMouseOver)(t)},n.onMouseOut=function(t){return(e.props.onMouseOut||e.onMouseOut)(t)},n.onFocus=function(t){return(e.props.onFocus||e.onFocus)(t)},n.onBlur=function(t){return(e.props.onBlur||e.onBlur)(t)},n.onKeyDown=function(t){return(e.props.onKeyDown||e.onKeyDown)(t)},n.onClick=function(t){return(e.props.onClick||e.onClick)(t)};var s=this.aria;for(var i in s)n[i]=s[i];return n}},{key:"altText",get:function(){return this.props.altText||this.state.altText}},{key:"title",get:function(){return this.player.getLocalizedString(this.altText)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),i=function(e){function t(e,a){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClick",value:function(){this.panel.toggle()}},{key:"onKeyDown",value:function(e){this.panel.onKeyDown(e)}},{key:"propsList",get:function(){var e=babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propsList",this),a=(e.panel,babelHelpers.objectWithoutProperties(e,["panel"]));return a}},{key:"panel",get:function(){return this.plugin.refs[this.props.panel]}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),l=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-playpause",!0),n.state.altText="MSG_PLAY",n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onplaying",value:function(){this.setState({altText:"MSG_PAUSE"})}},{key:"onpause",value:function(){this.setState({altText:"MSG_PLAY"})}},{key:"onended",value:function(){this.setState({altText:"MSG_REPLAY"})}},{key:"onClick",value:function(){var e=this.player;switch(e.playState){case"ended":this.plugin.replay();break;case"ready":case"paused":e.play();break;default:e.pause()}}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),r=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-pause-overlay",!0),n.state.altText="MSG_PLAY",n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClick",value:function(){var e=this.player;switch(e.playState){case"ended":this.plugin.replay();break;default:e.play()}}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),o=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-buffering-overlay",!0),n.classList.add("amp-icon"),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),c=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"formatTimecode",value:function(t,a){if(t=parseInt(t),isNaN(t))return"00:00";var n=e.formatZeroFill(t%60);return t=parseInt(t/60),n=e.formatZeroFill(t%60)+":"+n,t=parseInt(t/60),t>0&&(n=e.formatZeroFill(t)+":"+n),a>=3600&&5===n.length&&(n="00:"+n),n}},{key:"formatZeroFill",value:function(e){var t=e.toString();return e<10&&(t="0"+t),t}},{key:"round",value:function(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}},{key:"getEventPos",value:function(e){return{x:e.pageX-(window.scrollX||window.pageXOffset)||e.targetTouches[0].pageX-window.scrollX,y:e.pageY-(window.scrollY||window.pageYOffset)||e.targetTouches[0].pageY-window.scrollY}}},{key:"componentEnabled",value:function(e,t){var a=e.config[t];return null!=e.player[t]&&e.player[t].enabled!==!1||null!=a&&a!==!1&&a.enabled!==!1&&a.disabled!==!0}},{key:"isNumber",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}}]),e}(),u=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.currentTime=n.player.currentTime,n.state.duration=n.player.duration,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onmediachange",value:function(e){this.setState({currentTime:0})}},{key:"ontimeupdate",value:function(e){this.setState({currentTime:Math.round(e.detail)})}},{key:"onseeking",value:function(){this.setState({currentTime:Math.round(this.player.currentTime)})}},{key:"ondurationchange",value:function(e){this.setState({duration:Math.round(e.detail)})}},{key:"render",value:function(){return React.createElement("span",{className:"amp-current-time"},c.formatTimecode(this.state.currentTime,this.state.duration))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),p=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.isLive=!0,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onislive",value:function(e){this.setState({isLive:e.detail})}},{key:"liveClickHandler",value:function(){this.state.isLive||this.player.goLive()}},{key:"render",value:function(){return React.createElement("span",{ref:"element",className:"amp-live-label",onClick:this.liveClickHandler.bind(this)},this.getLocalizedString(this.state.isLive?"MSG_LIVE":"MSG_GO_LIVE"))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),h=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.duration=n.player.duration,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onmediachange",value:function(e){this.setState({duration:Math.round(this.player.duration)})}},{key:"ondurationchange",value:function(e){this.setState({duration:Math.round(e.detail)})}},{key:"render",value:function(){return React.createElement("span",{className:"amp-duration"},c.formatTimecode(this.state.duration,this.state.duration))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),b=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.percent=0,n.state.value=0,n.state.min=0,n.state.range=0,n.state.max=1,n.state.dragging=!1,n.increment=.1,n.classList.add("amp-slider"),n.direction="",n.bindHandlers(["onHandleMouseDown","onHandleMouseUp","onHandleMouseMove"]),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"format",value:function(e){return e}},{key:"update",value:function(e){return null==e.percent&&null!=e.value&&(e.percent=e.value/this.max),null==e.value&&null!=e.percent&&(e.value=Math.round(e.percent*this.max)),null==e.valueText&&null!=e.value&&(e.valueText=this.format(e.value)+" "+this.getLocalizedString("MSG_OF")+" "+this.format(this.max)),c.isNumber(e.value)||delete e.value,c.isNumber(e.percent)||delete e.percent,this.setState(e),e}},{key:"move",value:function(e){var t=this.refs.element.getBoundingClientRect(),a=c.getEventPos(e);"vertical"===this.direction?this.percent=1-(a.y-t.top)/t.height:this.percent=(a.x-t.left)/t.width}},{key:"onClick",value:function(e){"ready"!=this.player.playState&&this.move(e)}},{key:"onAction",value:function(){}},{key:"onKeyPress",value:function(e){var t=e.keyCode;39==t||38==t?this.percent+=this.increment:37!=t&&40!=t||(this.percent-=this.increment)}},{key:"onHandleMouseDown",value:function(e){"ready"!=this.player.playState&&(e.stopPropagation(),e.preventDefault(),this.dragging=!0,window.addEventListener("mouseup",this.onHandleMouseUp),window.addEventListener("mousemove",this.onHandleMouseMove),window.addEventListener("touchend",this.onHandleMouseUp),window.addEventListener("touchmove",this.onHandleMouseMove))}},{key:"onHandleMouseMove",value:function(e){this.move(e)}},{key:"onHandleMouseUp",value:function(e){e.stopPropagation(),e.preventDefault(),this.dragging=!1,window.removeEventListener("mouseup",this.onHandleMouseUp),window.removeEventListener("mousemove",this.onHandleMouseMove),window.removeEventListener("touchend",this.onHandleMouseUp),window.removeEventListener("touchmove",this.onHandleMouseMove),this.change(this.update({value:this.value,percent:this.percent}))}},{key:"render",value:function(){var e=c.round(100*this.percent,2)+"%",t=c.round(100*this.range,2)+"%";return React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{onMouseMove:this.onMouseMove}),React.createElement("div",{ref:"track",className:"amp-track"}),React.createElement("div",{ref:"range",className:"amp-range",style:{width:t}}),React.createElement("div",{ref:"value",className:"amp-value",style:{width:e}}),this.children,React.createElement("div",{ref:"handle",className:"amp-handle",style:{left:e},onMouseDown:this.onHandleMouseDown,onTouchStart:this.onHandleMouseDown}))}},{key:"percent",set:function(e){e=akamai.amp.Utils.clamp(e,0,1),this.percent!=e&&this.change(this.update({percent:e}))},get:function(){return this.state.percent}},{key:"value",set:function(e){e=akamai.amp.Utils.clamp(e,this.min,this.max),this.value!=e&&this.change(this.update({value:e}))},get:function(){return this.state.value}},{key:"range",set:function(e){e=akamai.amp.Utils.clamp(e,this.min,this.max),this.range!=e&&this.setState({range:e})},get:function(){return this.state.range}},{key:"min",set:function(e){this.min!=e&&this.setState({min:e})},get:function(){return this.state.min}},{key:"max",set:function(e){this.max!=e&&this.setState({max:e})},get:function(){return this.state.max}},{key:"dragging",set:function(e){this.dragging!=e&&(this.setState({dragging:e}),this.classList.update({"amp-dragging":e}),this.plugin.dragging=e)},get:function(){return this.state.dragging}},{key:"markers",get:function(){return this.refs.markers}},{key:"aria",get:function(){return Object.assign(babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"aria",this),{role:"slider","aria-valuemin":this.state.min,"aria-valuemax":Math.round(this.state.max),"aria-valuenow":Math.round(this.state.value),"aria-valuetext":this.state.valueText})}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),y=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-progress",!0),n.state.altText="MSG_SEEK",n.state.textVisible="visible",n.bindHandlers(["onMouseMove","onaddurationchange","onadtimeupdate","onaddurationchange","onadmanagerloaded"]),n.isTouch=akamai.amp.Utils.isTouch,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"format",value:function(e){return c.formatTimecode(e,this.max)}},{key:"onready",value:function(){this.player.addEventListener("adbreakend",this.ondurationchange),this.player.addEventListener("adtimeupdate",this.onadtimeupdate),this.player.addEventListener("addurationchange",this.onaddurationchange)}},{key:"onmediachange",value:function(){this.update({value:0}),this.range=0}},{key:"ontimeupdate",value:function(){this.dragging||this.update({value:this.player.currentTime})}},{key:"onseeking",value:function(){this.update({value:this.player.currentTime})}},{key:"onprogress",value:function(e){this.range=e.detail}},{key:"oncueschange",value:function(e){var t=e.detail,a=this.markers;if(a.clear(),!(null==t||t.length<=0)){var n=this.player.duration;t.forEach(function(e,t){e.startTime<=0||a.addComponent(React.createElement("div",{className:"amp-marker",style:{left:e.startTime/n*100+"%"},key:t}))})}}},{key:"ondurationchange",value:function(e){this.increment=10/this.player.duration,this.max=this.player.duration,this.update({value:"breakend"==e.type&&"preroll"==e.data.type?0:this.player.currentTime})}},{key:"onadtimeupdate",value:function(e){"ready"!=this.player.playState&&this.update({value:e.detail})}},{key:"onaddurationchange",value:function(e){this.max=e.detail.duration}},{key:"onMouseMove",value:function(e){var t=this.refs.element.getBoundingClientRect(),a=c.getEventPos(e),n=(a.x-t.left)/t.width;this.setState({textPercent:akamai.amp.Utils.clamp(c.round(n,4),0,1)})}},{key:"onKeyPress",value:function(e){this.player.ads&&this.player.ads.inProgress||"ready"==this.player.playState||babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeyPress",this).call(this,e)}},{key:"onHandleMouseDown",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onHandleMouseDown",this).call(this,e),this.isTouch&&this.setState({textVisible:"visible"})}},{key:"onHandleMouseMove",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onHandleMouseMove",this).call(this,e),this.onMouseMove(e)}},{key:"onHandleMouseUp",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onHandleMouseUp",this).call(this,e),this.isTouch&&this.setState({textVisible:"hidden"})}},{key:"onChange",value:function(e){this.dragging||(this.player.currentTime=e.value)}},{key:"propsList",get:function(){var e=babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propsList",this);return e.onMouseMove=this.onMouseMove,e}},{key:"markers",get:function(){return this.refs.markers}},{key:"children",get:function(){var e=(100*this.state.textPercent+"%",this.refs.element?this.refs.text.clientWidth/1.3*100/this.refs.element.clientWidth:0),t=100-e,a=akamai.amp.Utils.clamp(c.round(100*this.state.textPercent,2),e,t)+"%";return React.createElement("div",null,React.createElement(n,{ref:"markers",className:"amp-markers"}),React.createElement("div",{ref:"text",className:"amp-text",style:{left:a,visibility:this.state.textVisible}},this.format(this.state.textPercent*this.player.duration)))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(b),d=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-volume",!0),n.state.min=0,n.state.max=100,n.state.percent=n.player.volume,n.state.value=100*n.player.volume,n.state.altText="MSG_VOLUME",n._open=!0,n.timeout=null,n.config.volume&&(n.direction=n.config.volume.direction?n.config.volume.direction:"","vertical"===n.direction&&(n.classList.add("amp-volume-"+n.direction,!0),n.classList.add("amp-slider-"+n.direction,!0),n.classList.remove("amp-slider",!0))),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onready",value:function(e){this.open="vertical"!==this.direction,this.classList.update({"amp-open":this._open})}},{key:"onseeked",value:function(e){this.open=!1}},{key:"onmediachange",value:function(e){this.open=!1}},{key:"format",value:function(e){return Math.round(e)}},{key:"onvolumechange",value:function(e){this.update({percent:e.detail})}},{key:"onClick",value:function(e){this.move(e)}},{key:"onChange",value:function(e){this.player.volume=e.percent}},{key:"onMouseOver",value:function(e){this.plugin.dispatchEvent(new akamai.amp.Event("volumemouseover")),this.open=!0,clearTimeout(this.timeout)}},{key:"onMouseOut",value:function(e){var t=this;this.plugin.dispatchEvent(new akamai.amp.Event("volumemouseout")),clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.open=!1},350)}},{key:"onHandleMouseDown",value:function(e){e.stopPropagation(),e.preventDefault(),this.dragging=!0,window.addEventListener("mouseup",this.onHandleMouseUp),window.addEventListener("mousemove",this.onHandleMouseMove),window.addEventListener("touchend",this.onHandleMouseUp),window.addEventListener("touchmove",this.onHandleMouseMove)}},{key:"render",value:function(){if(0==akamai.amp.Utils.isVolumeSettable())return null;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this);var e=c.round(100*this.percent,2)+"%",a=c.round(100*this.range,2)+"%",n=React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{onMouseMove:this.onMouseMove}),React.createElement("div",{ref:"track",className:"amp-track"}),React.createElement("div",{ref:"range",className:"amp-range",style:{width:a}}),React.createElement("div",{ref:"value",className:"amp-value",style:{width:e}}),this.children,React.createElement("div",{ref:"handle",className:"amp-handle",style:{left:e},onMouseDown:this.onHandleMouseDown,onTouchStart:this.onHandleMouseDown}));return"vertical"==this.direction&&(n=React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{onMouseMove:this.onMouseMove}),React.createElement("div",{ref:"panel",className:"amp-volume-panel"}),React.createElement("div",{ref:"track",className:"amp-track"}),React.createElement("div",{ref:"range",className:"amp-range",style:{height:a}}),React.createElement("div",{ref:"value",className:"amp-value",style:{height:e}}),this.children,React.createElement("div",{ref:"handle",className:"amp-handle",style:{bottom:e},onMouseDown:this.onHandleMouseDown,onTouchStart:this.onHandleMouseDown}))),n}},{key:"open",set:function(e){"vertical"==this.direction&&(this._open=e,this.classList.update({"amp-open":this._open}))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(b),f=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.toggled=!1,n.state.onlabel="",n.state.offlabel="",n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"toggle",value:function(){return this.toggled=!this.toggled}},{key:"onClick",value:function(e){this.toggle()}},{key:"toggled",set:function(e){return e===this.state.toggled?e:(this.setState({toggled:e}),void this.change(e))},get:function(){return this.state.toggled}},{key:"propsList",get:function(){var e=babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propsList",this);return e["aria-checked"]=this.state.toggled,e.role="switch",e}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),m=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.level="",n.classList.add("amp-mute",!0),n.state.altText="MSG_MUTE",n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onChange",value:function(){var e=this.player;e.muted=!e.muted}},{key:"onMouseOver",value:function(e){this.plugin.dispatchEvent(new akamai.amp.Event("mutemouseover"))}},{key:"onMouseOut",value:function(e){this.plugin.dispatchEvent(new akamai.amp.Event("mutemouseout"))}},{key:"onvolumechange",value:function(){var e="";this.player.muted?e="amp-muted":this.player.volume<.5&&(e="amp-low"),this.setState({level:e})}},{key:"className",get:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"className",this)+" "+this.state.level}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(f),g=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-unmute",!0),n.state.altText="MSG_UNMUTE",n.state.dismissed=!1,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onmutechange",value:function(e){e.detail===!1&&this.setState({dismissed:!0})}},{key:"onClick",value:function(e){this.player.muted=!1,e.stopPropagation()}},{key:"render",value:function(){return this.state.dismissed===!0?null:React.createElement("div",{className:"amp-unmute-layer",onClick:this.propsList.onClick},babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),v=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-fullscreen",!0),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onfullscreenchange",value:function(e){var t=e.detail?"MSG_EXIT_FULLSCREEN":"MSG_ENTER_FULLSCREEN";this.setState({altText:t})}},{key:"onClick",value:function(){"normal"==this.player.displayState?this.player.enterFullScreen():this.player.exitFullScreen()}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),k=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-settings",!0),n.state.altText="MSG_SETTINGS",n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(i),_=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-list-item"),n.classList.remove("amp-icon"),n.classList.remove("amp-control"),n.state.direction=n.props.direction||"none",n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"focus",value:function(){this.refs.element.focus()}},{key:"onKeyDown",value:function(e){if(1!=this.mouseFocus){if(this.onKeyPress(e),"keydown"==e.type){switch(e.keyCode){case 13:case 32:this.props.onClick(e)||this.onClick(e);break;case 37:"left"===this.state.direction&&(this.props.onClick(e)||this.onClick(e));break;case 39:"right"===this.state.direction&&(this.props.onClick(e)||this.onClick(e));break;case 38:null!==this.element.previousElementSibling&&this.element.previousElementSibling.focus();break;case 40:null!==this.element.nextElementSibling&&this.element.nextElementSibling.focus()}if((9==e.keyCode||40==e.keyCode)&&0==e.shiftKey&&null===this.element.nextElementSibling||(9==e.keyCode||38==e.keyCode)&&1==e.shiftKey&&null===this.element.previousElementSibling||27==e.keyCode){var t=void 0;this.refs.element.parentNode.className.indexOf("share")>=0?(t=4,this.plugin.refs.sharePanel.close()):(t=2,this.plugin.refs.settingsPanel.close());var a=document.getElementsByClassName("amp-control");setTimeout(function(){a[a.length-t].focus()},1)}}e.stopPropagation()}}},{key:"render",value:function(){return React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{role:"menuitem"}),this.children)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),C=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.closeHandler=n.closeHandler.bind(n),n._open=!1,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"closeHandler",value:function(e){void 0===this.element||this.element.contains(e.target)||(this.open=!1,document.removeEventListener("click",this.closeHandler))}},{key:"toggle",value:function(){this.open=!this.open}},{key:"close",value:function(){this.open=!1}},{key:"isOptionSelected",value:function(e,t){return t===this.state.activeIndex}},{key:"clickHandler",value:function(e,t){this.setState({activeIndex:t})}},{key:"backHandler",value:function(e){this.props.gotoSettings(e)}},{key:"render",value:function(){var e=this,t=this.listOptions.map(function(t,a){return React.createElement(_,{key:a,onClick:e.clickHandler.bind(e,t,a)},React.createElement("button",{tabIndex:"-1",className:e.isOptionSelected(t,a)?"amp-icon amp-list-item-selected":"amp-icon"}),React.createElement("span",null,t.label))});return React.createElement("div",{ref:"element"},React.createElement(_,{className:"amp-list-title",onClick:this.backHandler.bind(this),direction:"left"},React.createElement("button",{tabIndex:"-1",className:"amp-icon amp-icon-left"}),React.createElement("span",null,this.state.title)),t)}},{key:"open",set:function(e){e!=this._open&&(this._open=e,this.classList.update({"amp-open":this._open}),this.plugin.open=e,this._open?(document.addEventListener("click",this.closeHandler),this.context.plugin.activeState="active",
this.context.plugin.stopIdleTimeout(),this.props.onopen&&this.props.onopen(this)):(this.context.plugin.startIdleTimeout(),document.removeEventListener("click",this.closeHandler),this.props.onclose&&this.props.onclose(this)))},get:function(){return this._open}},{key:"propsList",get:function(){var e=babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propsList",this),a=(e.onclose,e.onopen,babelHelpers.objectWithoutProperties(e,["onclose","onopen"]));return a}},{key:"title",get:function(){return"TITLE"}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),H=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.keyDown=!1,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onKeyDown",value:function(e){13!=e.keyCode&&32!=e.keyCode||(this.state.keyDown=!0,this.toggle())}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(C),O=function(e){function t(e,a){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"clickHandler",value:function(e,t){this.setState({activeIndex:t}),this.props.settingsChange({language:this.listOptions[t]})}},{key:"render",value:function(){var e=this;this.listOptions=[{label:"Off",value:"off"}],this.player.captioning.tracks.forEach(function(t){var a=t.language;e.listOptions.push({label:e.player.localization.getLanguageString(a),value:a})});var t=this.listOptions.map(function(t,a){var n=!e.player.captioning.hidden&&e.player.captioning.track&&t.value==e.player.captioning.track.language;return e.player.captioning.hidden&&0===a&&(n=!0),React.createElement(_,{key:a,onClick:e.clickHandler.bind(e,t,a)},React.createElement("button",{className:n?"amp-icon amp-list-item-selected":"amp-icon",tabIndex:"-1"}),React.createElement("span",null,t.label))});return React.createElement("div",{ref:"element",className:"amp-captioning-home"},React.createElement(_,{className:"amp-list-highlight",onClick:this.props.gotoSettings.bind(this),direction:"left"},React.createElement("button",{className:"amp-icon amp-icon-left",tabIndex:"-1"}),React.createElement("span",null,"Subtitles/CC")),React.createElement(_,{onClick:function(t){return e.props.viewChange(t,"options")},className:"amp-option-button"},"Options"),t)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(C),E=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.listOptions=[{label:"Font Family",key:"fontFamily",value:"Arial"},{label:"Font Color",key:"fontColor",value:"Red"},{label:"Font Size",key:"size",value:"100%"},{label:"Font Opacity",key:"fontOpacity",value:"0%"},{label:"Background Color",key:"backgroundColor",value:"Black"},{label:"Background Opacity",key:"backgroundOpacity",value:"0%"},{label:"Window Color",key:"windowColor",value:"Red"},{label:"Window Opacity",key:"windowOpacity",value:"0%"},{label:"Character Edge Style",key:"edgeType",value:"None"},{label:"Edge Color",key:"edgeColor",value:"Red"},{label:"Edge Opacity",key:"edgeOpacity",value:"Red"},{label:"Scroll",key:"scroll",value:"Pop-out"}],n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this,t=this.listOptions.map(function(t,a){return React.createElement(_,{key:t.key,onClick:function(a){return e.props.viewChange(a,t.key)},direction:"right"},React.createElement("span",{className:"amp-label"},t.label),React.createElement("button",{className:"amp-icon amp-icon-right amp-right",tabIndex:"-1"}),React.createElement("span",{className:"amp-right"},e.props.captionsettings[t.key+"Label"]))});return React.createElement("div",{className:"amp-captioning-options"},React.createElement(_,{className:"amp-list-title",onClick:function(t){return e.props.viewChange(t,"home")},direction:"left"},React.createElement("button",{className:"amp-icon amp-icon-left",tabIndex:"-1"}),React.createElement("span",null,"Options")),t)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(C),x=function(e){function t(e,a){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"select",value:function(){for(var e=this.listOptions,t=this.props.captionsettings,a=e.length,n=0;n<a;n++)if(/color/i.test(this.setting)&&e[n].value.r==t[this.setting].r&&e[n].value.g==t[this.setting].g&&e[n].value.b==t[this.setting].b||/opacity/i.test(this.setting)&&e[n].value==t[this.setting.replace("Opacity","Color")].a||!/opacity|color/i.test(this.setting)&&e[n].value==t[this.setting]){this.state.activeIndex=n;break}}},{key:"clickHandler",value:function(e,a){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clickHandler",this).call(this,e,a),this.props.settingsChange(babelHelpers.defineProperty({},this.setting,e))}},{key:"backHandler",value:function(e){this.props.viewChange(e,"options")}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(C),T=function(){function e(t,a,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(babelHelpers.classCallCheck(this,e),"string"==typeof t){var i=t.match(/[0-9\.]+/g);t=parseInt(i[0]),a=parseInt(i[1]),n=parseInt(i[2]),s=null!=i[3]?parseFloat(i[3]):1}this.r=t,this.g=a,this.b=n,this.a=s}return babelHelpers.createClass(e,[{key:"toString",value:function(e){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}}],[{key:"contextTypes",get:function(){return babelHelpers.get(e.__proto__||Object.getPrototypeOf(e),"contextTypes",this)}}]),e}(),w=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Background Color",n.setting="backgroundColor",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),R=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Background Opacity",n.setting="backgroundOpacity",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),P=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Character Edge Style",n.setting="edgeType",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),L=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Font Color",n.setting="fontColor",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),M=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Font Family",n.setting="fontFamily",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),S=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Font Opacity",n.setting="fontOpacity",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),j=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Font Size",n.setting="size",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),N=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Window Color",n.setting="windowColor",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),I=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Window Opacity",n.setting="windowOpacity",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),D=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Scroll Type",n.setting="scroll",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),U=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Edge Color",n.setting="edgeColor",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),A=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Edge Opacity",n.setting="edgeOpacity",n.listOptions=e.labels[n.setting],n.select(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(x),F=function e(){var t;return babelHelpers.classCallCheck(this,e),t={fontFamily:[{label:"Monospaced Serif",value:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace"},{label:"Proportional Serif",value:"'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif"},{label:"Monospaced Sans-Serif",value:"'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace"},{label:"Proportional Sans-Serif",value:"Roboto, 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif"},{label:"Casual",value:"'Comic Sans MS', Impact, Handlee, fantasy"},{label:"Cursive",value:"'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', cursive"},{label:"Small Capitals",value:"'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif; font-variant: small-caps"}],fontColor:[{label:"White",value:new T(255,255,255)},{label:"Yellow",value:new T(255,255,0)},{label:"Green",value:new T(0,128,0)},{label:"Cyan",value:new T(0,255,255)},{label:"Blue",value:new T(0,0,255)},{label:"Magenta",value:new T(255,0,255)},{label:"Red",value:new T(255,0,0)},{label:"Black",value:new T(0,0,0)}],size:[{label:"70%",value:"x-small"},{label:"100%",value:"small"},{label:"150%",value:"medium"},{label:"200%",value:"large"},{label:"300%",value:"x-large"}],fontOpacity:[{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}],backgroundColor:[{label:"White",value:new T(255,255,255)},{label:"Yellow",value:new T(255,255,0)},{label:"Green",value:new T(0,128,0)},{label:"Cyan",value:new T(0,255,255)},{label:"Blue",value:new T(0,0,255)},{label:"Magenta",value:new T(255,0,255)},{label:"Red",value:new T(255,0,0)},{label:"Black",value:new T(0,0,0)}],backgroundOpacity:[{label:"0%",value:0},{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}],edgeType:[{label:"None",value:"text-shadow: 0px 0px 0px"},{label:"Depressed",value:"text-shadow: 0px 1px 0px"},{label:"Left Drop Shadow",value:"text-shadow: -3px 3px 2px"},{label:"Raised",value:"text-shadow: 0px 1px 1px"},{label:"Right Drop Shadow",value:"text-shadow: 3px 3px 2px"},{label:"Uniform",value:"text-shadow: 0px 0px 4px"}],edgeColor:[{label:"White",value:new T(255,255,255)},{label:"Yellow",value:new T(255,255,0)},{label:"Green",value:new T(0,128,0)},{label:"Cyan",value:new T(0,255,255)},{label:"Blue",value:new T(0,0,255)},{label:"Magenta",value:new T(255,0,255)},{label:"Red",value:new T(255,0,0)},{label:"Black",value:new T(0,0,0)}],edgeOpacity:[{label:"0%",value:0},{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}]},babelHelpers.defineProperty(t,"fontOpacity",[{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}]),babelHelpers.defineProperty(t,"scroll",[{label:"Pop-out",value:"popout"},{label:"Roll-on",value:"rollon"},{label:"Paint-on",value:"painton"}]),babelHelpers.defineProperty(t,"windowColor",[{label:"White",value:new T(255,255,255)},{label:"Yellow",value:new T(255,255,0)},{label:"Green",value:new T(0,128,0)},{label:"Cyan",value:new T(0,255,255)},{label:"Blue",value:new T(0,0,255)},{label:"Magenta",value:new T(255,0,255)},{label:"Red",value:new T(255,0,0)},{label:"Black",value:new T(0,0,0)}]),babelHelpers.defineProperty(t,"windowOpacity",[{label:"0%",value:0},{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}]),t},q=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));n.state.languages=[],n.state.keyDown=!1;var s=Object.assign({},n.player.settings.captions);delete s.track;for(var i in s)/Color$/.test(i)&&(s[i]=new T(s[i]),s[i.replace("Color","Opacity")]=s[i].a);return n.state.captionsettings=s,n.state.viewChange=n.changeView.bind(n),n.state.settingsChange=n.changeSettings.bind(n),n.state.level="home",n.state.labels=new F,n.initSettingLabels(),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentWillMount",value:function(){this.open=!0}},{key:"focus",value:function(e){this.refs.element.firstChild.children[2].focus()}},{key:"changeView",value:function(e,t){var a=this;!/keydown/.test(e.type)||13!=e.keyCode&&32!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode||(this.keyDown=!0),setTimeout(function(){a.setState({level:t})},100)}},{key:"initSettingLabels",value:function(){var e=this,t=function(t){e.state.labels[t].forEach(function(a){(/color/i.test(t)&&a.value.r==e.state.captionsettings[t].r&&a.value.g==e.state.captionsettings[t].g&&a.value.b==e.state.captionsettings[t].b||/opacity/i.test(t)&&a.value==e.state.captionsettings[t.replace("Opacity","Color")].a||e.state.captionsettings[t]==a.value)&&(e.state.captionsettings[t+"Label"]=a.label)})};for(var a in this.state.labels)t(a)}},{key:"changeSettings",value:function(e){for(var t in e){var a=e[t],n=a.value;switch(t){case"language":var s="off"==a.value;s||this.player.captioning.selectTrackByLanguage(a.value),this.player.captioning.hidden=s;break;case"backgroundColor":case"windowColor":case"fontColor":case"edgeColor":n.a=this.state.captionsettings[t].a;break;case"backgroundOpacity":case"fontOpacity":case"windowOpacity":case"edgeOpacity":var i=this.state.captionsettings[t.replace("Opacity","Color")];i.a=n,n=i}this.state.captionsettings[t.replace("Opacity","Color")]=n,this.state.captionsettings[t+"Label"]=a.label}var l=Object.assign({},this.state.captionsettings);for(var r in l)/Label$/.test(r)||/Opacity$/.test(r)||/language/.test(r)?delete l[r]:/Color$/.test(r)&&(l[r]=l[r].toString());l.visible=!this.player.captioning.hidden,this.player.captioning.changeSettings(l)}},{key:"componentDidUpdate",value:function(e,t){this.keyDown&&(this.refs.element.firstChild.children[1].focus(),this.keyDown=!1)}},{key:"getCurrentPage",value:function(){switch(this.state.level){case"home":return React.createElement(O,babelHelpers.extends({},this.state,{gotoSettings:this.props.gotoSettings.bind(this)}));case"options":return React.createElement(E,this.state);case"fontFamily":return React.createElement(M,this.state);case"fontColor":return React.createElement(L,this.state);case"size":return React.createElement(j,this.state);case"fontOpacity":return React.createElement(S,this.state);case"backgroundColor":return React.createElement(w,this.state);case"backgroundOpacity":return React.createElement(R,this.state);case"windowColor":return React.createElement(N,this.state);case"windowOpacity":return React.createElement(I,this.state);case"edgeType":return React.createElement(P,this.state);case"edgeColor":return React.createElement(U,this.state);case"edgeOpacity":return React.createElement(A,this.state);case"scroll":return React.createElement(D,this.state)}}},{key:"render",value:function(){return React.createElement("div",{ref:"element",role:"menu"},this.getCurrentPage())}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(C),G=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.listOptions=[{label:"Auto",value:"0.25"}],n.qualityLevels=[],n.state.title="Quality",n.state.activeIndex=-1,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentWillMount",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this),this.onqualitylevelsloaded({detail:this.player.qualityLevels}),this.onqualitychanging({detail:this.player.qualityLevels[this.player.quality]}),this.open=!0}},{key:"clickHandler",value:function(e,t){this.player.quality=t-1,t||this.onqualitychanging()}},{key:"onqualitylevelsloaded",value:function(e){var t=this;this.qualityLevels=e.detail,this.qualityLevels.forEach(function(e){t.listOptions.push({label:Math.round(e.bitrate/1e3)+" Kbps"})}),this.setState({redraw:!0})}},{key:"onqualitychanging",value:function(e){var t=-1,a=!1;try{a=this.player.qualityMode,t="auto"==a?-1:e.detail?this.qualityLevels.findIndex(function(t){return t.qualityIndex==e.detail.qualityIndex&&t.level==e.detail.level}):this.props.quality.quality}catch(e){}this.setState({activeIndex:t})}},{key:"isOptionSelected",value:function(e,t){return t-1===this.state.activeIndex}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(C),B=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.title="Speed",n.listOptions=[{label:"0.25",value:.25},{label:"0.5",value:.5},{label:"Normal",value:1},{label:"1.25",value:1.25},{label:"1.5",value:1.5},{label:"2",value:2}],n.state.activeIndex=2,n.listOptions.forEach(function(e,t){e.value==n.player.playbackRate&&(n.state.activeIndex=t)}),n.classList.add("amp-playback-rate"),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"clickHandler",value:function(e,a){this.player.playbackRate=e.value,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clickHandler",this).call(this,e,a)}},{key:"isOptionSelected",value:function(e,t){return parseFloat(e.value)===parseFloat(this.player.playbackRate)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(C),K=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.listOptions=[],n.audioTracks=[],n.activeIds=[],n.state.title="Audio",n.state.activeIndex=-1,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentWillMount",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this),this.audioTracks=this.player.audioTracks,this.oncanplaythrough({detail:this.audioTracks}),this.open=!0}},{key:"clickHandler",value:function(e,t){this.player.audioTracks[t].enabled=!0,this.setState({activeIndex:t-1}),this.setState({redraw:!0})}},{key:"onmediachange",value:function(e){this.listOptions=[],this.activeIds=[]}},{key:"oncanplaythrough",value:function(e){var t=this;this.audioTracks=this.player.audioTracks,this.audioTracks.forEach(function(e){if(null==t.activeIds[e.id]){var a=t.player.localization.getLanguageString(e.language)||e.language,n=e.label||a||e.id||t.player.localization.getString("MSG_UNKNOWN");t.activeIds[e.id]=!0,t.listOptions.push({label:n})}}),this.setState({redraw:!0})}},{key:"isOptionSelected",value:function(e,t){return this.player.audioTracks[t].enabled}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(C),V=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.settingsLevel=0,n.state.bitrateLabel="Auto",n.state.captioningSettingState=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onready",value:function(e){this.setState({autoplay:this.player.autoplay})}},{key:"onseeked",value:function(e){this.open=!1}},{key:"toggle",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toggle",this).call(this),this.state.settingsLevel=0}},{key:"onqualitychanging",value:function(e){var t="auto"===this.player.qualityMode?"Auto":Math.round(e.detail.bitrate/1e3)+"Kbps";this.state.quality=this.state.qualityLevels?this.state.qualityLevels.findIndex(function(t){return t.qualityIndex==e.detail.qualityIndex&&t.level==e.detail.level}):-1,this.setState({bitrateLabel:t})}},{key:"changeState",value:function(e,t){var a=this;if("keydown"==t.type&&(13==t.keyCode||32==t.keyCode||37==t.keyCode||38==t.keyCode||39==t.keyCode||40==t.keyCode)&&1!=this.mouseFocus){if(37==t.keyCode&&0==this.state.settingsLevel)return;this.state.keyDown=!0}setTimeout(function(){a.setState({settingsLevel:e})},100)}},{key:"autoplayToggle",value:function(){this.setState({autoplay:this.player.autoplay=!this.player.autoplay})}},{key:"componentWillUpdate",value:function(e,t){1==t.settingsLevel&&this.refs.firstElem.state.captionsettings?this.setState({captioningSettingState:this.refs.firstElem.state.captionsettings}):null==this.refs.firstElem||isNaN(this.refs.firstElem.state.activeIndex)||this.setState({playbackSettingState:this.refs.firstElem.state.activeIndex})}},{key:"componentDidUpdate",value:function(e,t){this.state.keyDown&&("function"==typeof this.refs.firstElem.focus?this.refs.firstElem.focus():this.refs.firstElem.refs.element.childNodes[1].focus(),this.state.keyDown=!1)}},{key:"currentAudioTrackLabel",value:function(){for(var e=this.player.audioTracks,t=0;t<e.length;t++){var a=e[t];if(null!=a&&a.enabled){var n=this.player.localization.getLanguageString(a.language)||a.language,s=a.label||n||a.id||this.player.localization.getString("MSG_UNKNOWN");return s}}return""}},{key:"render",value:function(){switch(this.state.settingsLevel){case 0:var e=c.componentEnabled(this.plugin,"captioning"),t=null!=this.player.qualityLevels&&this.player.qualityLevels.length>1,a=null!=this.player.audioTracks&&this.player.audioTracks.length>1,n=void 0,s=void 0;return!e&&t?n="firstElem":e||t||(s="firstElem"),React.createElement("div",babelHelpers.extends({ref:"element"},this.propsList,{className:"amp-settings amp-panel "+this.className,role:"menu"}),e&&React.createElement(_,{ref:"firstElem",className:"amp-subtitles",onClick:this.changeState.bind(this,1),direction:"right"},React.createElement("span",{className:"amp-label"},"Subtitles"),React.createElement("button",{className:"amp-icon amp-icon-right amp-right",tabIndex:"-1"}),React.createElement("span",{className:"amp-right"},this.player.captioning.hidden?"Off":this.player.localization.getLanguageString(this.player.captioning.track.language))),t&&React.createElement(_,{ref:n,onClick:this.changeState.bind(this,2),direction:"right"},React.createElement("span",{className:"amp-label"},"Quality"),React.createElement("button",{className:"amp-icon amp-icon-right amp-right",tabIndex:"-1"}),React.createElement("span",{className:"amp-right"},this.state.bitrateLabel)),"flash"!=this.player.mode&&React.createElement(_,{ref:s,className:"amp-playback-rate-button",onClick:this.changeState.bind(this,3),direction:"right"},React.createElement("span",{className:"amp-label"},"Speed"),React.createElement("button",{className:"amp-icon amp-icon-right amp-right",tabIndex:"-1"}),React.createElement("span",{className:"amp-right"},1===this.player.playbackRate?"Normal":this.player.playbackRate)),a&&React.createElement(_,{ref:"audiotracks",className:"amp-playback-rate-button",direction:"right",onClick:this.changeState.bind(this,4)},React.createElement("span",{className:"amp-label"},"Audio"),React.createElement("button",{className:"amp-icon amp-icon-right amp-right",tabIndex:"-1"}),React.createElement("span",{className:"amp-right"},this.currentAudioTrackLabel())),React.createElement(_,{ref:"autoplay",className:this.state.autoplay?"amp-autoplay-on":"amp-autoplay-off",direction:"right",onClick:this.autoplayToggle.bind(this)},React.createElement("span",{className:"amp-label"},"Autoplay"),React.createElement("button",{className:"amp-right amp-icon amp-toggle"})));case 1:return React.createElement("div",{ref:"element",className:"amp-captioning-settings amp-panel "+this.className},React.createElement(q,{ref:"firstElem",captionState:this.state.captioningSettingState,gotoSettings:this.changeState.bind(this,0)}));case 2:return React.createElement("div",{ref:"element",className:"amp-bitrate amp-panel "+this.className},React.createElement(G,{ref:"firstElem",gotoSettings:this.changeState.bind(this,0)}));case 3:return React.createElement("div",{ref:"element",className:"amp-playback-rate amp-panel "+this.className},React.createElement(B,{ref:"firstElem",gotoSettings:this.changeState.bind(this,0)}));case 4:return React.createElement("div",{ref:"element",className:"amp-audio-tracks amp-panel "+this.className},React.createElement(K,{ref:"firstElem",gotoSettings:this.changeState.bind(this,0)}))}}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(H),W=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-share",!0),n.state.altText="MSG_SHARE",n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(i),z=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.listOptions=[{label:"Facebook",id:"facebook",url:"www.facebook.html"},{label:"Twitter",id:"twitter",url:"www.twitter.com"},{label:"Email",id:"email",url:""},{label:"Embed",id:"embed",url:""}],n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"clickHandler",value:function(e,t,a){var n=this.player.media;this.player.dispatch("share",{provider:e,link:n.link,embed:n.embed})}},{key:"componentDidUpdate",value:function(e,t){this.state.keyDown&&(this.refs.element.childNodes[0].focus(),this.state.keyDown=!1)}},{key:"render",value:function(){var e=this,t=this.listOptions.map(function(t,a){return React.createElement(_,{key:a,className:"amp-list-item",onClick:e.clickHandler.bind(e,t,a)},React.createElement("button",{className:"amp-icon amp-"+t.id,tabIndex:"-1"}),React.createElement("span",null,t.label))});return React.createElement("div",{ref:"element",className:"amp-share amp-panel "+this.className},t)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(H),Y=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-cc"),n.state.altText="MSG_CLOSED_CAPTIONING",n.state.toggled=!!n.player.captioning&&!n.player.captioning.hidden,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onmediachange",value:function(){setTimeout(this.forceUpdate.bind(this),1)}},{key:"onChange",value:function(e){this.player.captioning.hidden=!this.player.captioning.hidden}},{key:"render",value:function(){return c.componentEnabled(this.plugin,"captioning")?babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this):null}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(f),X=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-jump-back",!0),n.state.altText="MSG_JUMP_BACK",n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClick",value:function(){var e=this.player;"playing"===e.playState||"paused"===e.playState?this.player.currentTime=Math.max(this.player.currentTime-10,0):e.ended===!0&&this.player.replay()}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),Z=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-jump-forward",!0),n.state.altText="MSG_JUMP_AHEAD",n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClick",value:function(e){var t=this.player;t.ended||"playing"!=t.playState&&"paused"!=t.playState||(t.currentTime=Math.min(this.player.currentTime+10,this.player.duration-1));
}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),$=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onmediachange",value:function(e){this.setState({src:this.player.evaluateBindings(this.player.media.poster)})}},{key:"render",value:function(){return React.createElement("img",{className:"amp-poster",src:this.state.src})}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),J=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-title",!0),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onmediachange",value:function(e){this.setState({textContent:this.player.media.title})}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),Q=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onerror",value:function(e){this.setState({error:this.l10n.MSG_ERROR_DEFAULT})}},{key:"render",value:function(){return React.createElement("div",{className:"amp-error-msg"},React.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.error}}))}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),ee=function(e){function t(e,a){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=[React.createElement("li",{className:"amp-context-item amp-bold",key:"0"},"Akamai Adaptive Media Player"),React.createElement("li",{className:"amp-context-item",key:"1"},this.player.version)];"function"==typeof akamaiGetViewerId&&null!=akamaiGetViewerId()&&e.push(React.createElement("li",{className:"amp-context-item amp-selectable",key:"2"},"Viewer ID: ",akamaiGetViewerId()));var t={top:this.props.y+"px",left:this.props.x+"px"};return React.createElement("ul",{ref:"element",className:"amp-context-menu",style:t},e)}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),te=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-ads",!0),n.state.msg="",n.state.time="",n.bindHandlers(["onadbreakstart","onadbreakend","onadstarted","onadtimeremaining","onadimpression"]),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onready",value:function(){this.controlsMode=this.plugin.mode,this.player.addEventListener("adbreakstart",this.onadbreakstart),this.player.addEventListener("adbreakend",this.onadbreakend),this.player.addEventListener("adstarted",this.onadstarted),this.player.addEventListener("adtimeremaining",this.onadtimeremaining),this.player.addEventListener("adimpression",this.onadimpression)}},{key:"onmediachange",value:function(){this.onadbreakend()}},{key:"onadimpression",value:function(){this.plugin.container.classList.update({"amp-ad-overlaymode":!0}),this.player.ads.resize()}},{key:"onadbreakstart",value:function(e){this.plugin.container.classList.update({"amp-ad-break":!0}),this.player.container.classList.add("amp-ad-break");e.detail;this.setState({msg:"",time:""}),this.controlsMode=this.plugin.mode,this.plugin.mode=this.plugin.adMode}},{key:"onadstarted",value:function(e){var t=e.detail||{},a=null==t.position||null==t.totalAds?"":this.getLocalizedString("MSG_AD")+" "+t.position+" "+this.getLocalizedString("MSG_OF")+" "+t.totalAds;this.setState({time:t.duration,msg:a})}},{key:"onadbreakend",value:function(e){this.setState({msg:"",time:""}),this.plugin.container.classList.update({"amp-ad-break":!1}),this.player.container.classList.remove("amp-ad-break"),this.plugin.mode=this.controlsMode}},{key:"onadtimeremaining",value:function(e){"ready"!=this.player.playState&&this.setState({time:e.detail})}},{key:"render",value:function(){var e=""!=this.state.time?c.formatTimecode(Math.ceil(this.state.time)):this.state.time;return React.createElement("div",{ref:"containerNode",className:"amp-ads"},React.createElement("div",{ref:"container",className:"amp-ad-container"}),React.createElement("div",{className:"amp-bar amp-ad-info"},React.createElement("div",{ref:"count",className:"amp-ad-component amp-ad-count"},this.state.msg),React.createElement("div",{ref:"spacerLeft",className:"amp-spacer"}),React.createElement("div",{ref:"spacerRight",className:"amp-spacer"}),React.createElement("div",{ref:"time",className:"amp-ad-component amp-ad-time"},e)))}},{key:"container",get:function(){return this.refs.container}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(a),ae=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.available=!1,n.state.playing=!1,n.classList.add("amp-airplay",!0),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onready",value:function(e){var t=this;if(this.isAvailable!==!1){var a=this.player.mediaElement;a.setAttribute("x-webkit-airplay","allow"),a.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){t.state.available="available"==e.availability,t.playing=a.webkitCurrentPlaybackTargetIsWireless,t.forceUpdate()}),window.addEventListener("webkitcurrentplaybacktargetiswireless",function(e){t.playing=a.webkitCurrentPlaybackTargetIsWireless})}}},{key:"onClick",value:function(){this.player.mediaElement.webkitShowPlaybackTargetPicker()}},{key:"render",value:function(){return this.available===!1?null:babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"isAvailable",get:function(){return null!=window.WebKitPlaybackTargetAvailabilityEvent}},{key:"available",get:function(){return this.isAvailable&&this.state.available}},{key:"playing",set:function(e){this.state.playing=e,this.plugin.container.classList.update({"amp-playback-target-airplay":e})},get:function(){return this.state.playing}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),ne=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.classList.add("amp-pip",!0),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onplaying",value:function(e){this.forceUpdate()}},{key:"onClick",value:function(e){var t=this.player.mediaElement;t.webkitSetPresentationMode("picture-in-picture"===t.webkitPresentationMode?"inline":"picture-in-picture")}},{key:"render",value:function(){return this.available?babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this):null}},{key:"available",get:function(){var e=this.player.mediaElement;return null!=e&&"function"==typeof e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode&&e.webkitSupportsPresentationMode("picture-in-picture")}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),se=function(e){function t(e,a){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state.available=!1,n.classList.add("amp-chromecast",!0),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onready",value:function(){c.componentEnabled(this.plugin,"chromecast")&&this.setState({available:this.player.chromecast.available})}},{key:"onplaybacktargetavailabilitychange",value:function(e){"chromecast"===e.detail.target&&this.setState({available:e.detail.available})}},{key:"onClick",value:function(){this.player.chromecast.launch()}},{key:"render",value:function(){return this.available===!1?null:babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"available",get:function(){return this.state.available}}],[{key:"contextTypes",get:function(){return babelHelpers.get(t.__proto__||Object.getPrototypeOf(t),"contextTypes",this)}}]),t}(s),ie=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"AUTO",get:function(){return"auto"}},{key:"FIXED",get:function(){return"fixed"}},{key:"PERSISTENT",get:function(){return"persistent"}}]),e}(),le=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"ACTIVE",get:function(){return"active"}},{key:"INACTIVE",get:function(){return"inactive"}},{key:"IDLE",get:function(){return"idle"}}]),e}(),re=function(e){function t(e){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.feature="ui",a.state.playState="ready",a.state.open=!1,a.state.dragging=!1,a.state.mode=a.config.mode,a.isTouchDevice=akamai.amp.Utils.isTouch,a.contextMenuClick=a.contextMenuClick.bind(a),a.autoHide=null!=a.config.autoHide?a.config.autoHide:3,a.timeout=null;var n=new akamai.amp.EventDispatcher(a);for(var s in n){var i=n[s];"function"==typeof i&&(a[s]=i.bind(n))}return a.dispatcher=n,a.bindHandlers(["onMouseEnter","onMouseLeave","onFocus","onBlur","onKeyDown","onContextMenu","onClick"]),a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getChildContext",value:function(){return{player:this.props.player,config:this.props.config,plugin:this}}},{key:"onready",value:function(e){var t=this;null!=this.config.mode&&(this.mode=this.config.mode),this.container.classList.add("amp-"+this.player.mode),this.container.classList.update({"amp-cc-active":this.player.captioning&&!this.player.captioning.hidden,"amp-touch":this.isTouchDevice}),null!=this.player.captioning&&this.player.captioning.addEventListener("visibilitychange",this.onvisibilitychange.bind(this)),this.player.container.addEventListener("mouseenter",this.onMouseEnter),this.player.container.addEventListener("mouseleave",this.onMouseLeave),setTimeout(function(){t.container.element.style.display="block"},10)}},{key:"ondestroy",value:function(){this.stopIdleTimeout(),this.player.container.removeEventListener("mouseenter",this.onMouseEnter),this.player.container.removeEventListener("mouseleave",this.onMouseLeave)}},{key:"onvisibilitychange",value:function(e){this.container.classList.update({"amp-cc-active":e.detail})}},{key:"onplaybacktargetchange",value:function(e){this.container.classList.update({"amp-remote-playback":"amp"!=e.detail.value})}},{key:"onmediachange",value:function(e){var t=this.player.media;this.container.classList.update({"amp-audio":"audio"==t.medium}),this.container.classList.update({"amp-text-tracks":t.tracks&&t.tracks.length})}},{key:"onmutemouseover",value:function(e){this.stopIdleTimeout(),this.refs.volume.open=!0}},{key:"onmutemouseout",value:function(e){var t=this;this.stopIdleTimeout(),this.timeout=setTimeout(function(){t.refs.volume.open=!1},350)}},{key:"onvolumemouseover",value:function(e){this.stopIdleTimeout()}},{key:"onfullscreenchange",value:function(e){this.container.classList.update({"amp-full-screen":e.detail})}},{key:"onmutechange",value:function(e){this.container.classList.update({"amp-muted":e.detail})}},{key:"onplaystatechange",value:function(e){var t,a=(t={},babelHelpers.defineProperty(t,"amp-waiting",!1),babelHelpers.defineProperty(t,"amp-"+e.detail.previous,!1),babelHelpers.defineProperty(t,"amp-"+e.detail.value,!0),t);this.container.classList.update(a)}},{key:"oncanplaythrough",value:function(e){this.container.classList.update({"amp-can-play":!0})}},{key:"onplaying",value:function(e){this.container.classList.update({"amp-waiting":!1}),this.container.classList.remove("amp-qualitychange-manual"),this.container.classList.remove("amp-qualitychange-auto"),this.startIdleTimeout()}},{key:"onpause",value:function(e){this.stopIdleTimeout()}},{key:"onwaiting",value:function(e){var t=this;this.container.classList.update({"amp-waiting":!0}),this.player.once("timeupdate",function(){t.player.seeking===!1&&t.container.classList.update({"amp-waiting":!1})})}},{key:"onbusy",value:function(e){this.container.classList.update({"amp-busy":e.detail})}},{key:"onseeking",value:function(e){this.container.classList.update({"amp-waiting":!0})}},{key:"onseeked",value:function(e){this.container.classList.update({"amp-waiting":!1})}},{key:"onerror",value:function(e){this.container.classList.update({"amp-error":!0})}},{key:"onislive",value:function(e){this.container.classList.update({"amp-is-live":e.detail})}},{key:"ontemporaltypechange",value:function(e){var t,a=(t={},babelHelpers.defineProperty(t,"amp-"+e.detail.previous,!1),babelHelpers.defineProperty(t,"amp-"+e.detail.value,!0),t);this.container.classList.update(a)}},{key:"onqualitychanging",value:function(e){this.container.classList.add("amp-qualitychange-"+this.player.qualityMode)}},{key:"onqualitychange",value:function(e){this.container.classList.remove("amp-qualitychange-"+this.player.qualityMode)}},{key:"onqualityswitched",value:function(e){this.onqualitychange(e)}},{key:"togglePlayPause",value:function(){"ready"==this.player.playState||this.player.paused?this.player.play():this.player.pause()}},{key:"startIdleTimeout",value:function(){var e=this;this.refs.settingsPanel.open&&(this.refs.settingsPanel.close(),this.refs.volume.open=!1),this.stopIdleTimeout(),this.timeout=setTimeout(function(){e.activeState=le.IDLE},1e3*this.autoHide)}},{key:"stopIdleTimeout",value:function(){clearTimeout(this.timeout)}},{key:"onMouseEnter",value:function(e){this.isTouchDevice||(this.stopIdleTimeout(),this.activeState=le.ACTIVE)}},{key:"onMouseLeave",value:function(e){var t=this;if(!this.isTouchDevice){var a=document.elementFromPoint(e.clientX,e.clientY);if("ready"!=this.player.playState&&!this.open&&!this.player.container.contains(a)){if(this.dragging){var n=function a(){window.removeEventListener("mouseup",a),akamai.amp.Utils.isMouseOverElement(t.container.element)||t.onMouseLeave(e)};return void window.addEventListener("mouseup",n)}this.activeState=le.INACTIVE}}}},{key:"onClick",value:function(){this.isTouchDevice?this.activeState==le.ACTIVE?(this.activeState=le.IDLE,this.stopIdleTimeout()):(this.activeState=le.ACTIVE,this.startIdleTimeout()):this.togglePlayPause()}},{key:"isFocused",value:function(e){var t=this.container.element;return e==t||t.contains(e)}},{key:"onFocus",value:function(e){var t=this.isFocused(e.target);this.focused="BUTTON"!=e.target.nodeName&&t,t&&this.container.classList.add("amp-active")}},{key:"onBlur",value:function(e){var t=this.isFocused(e.target);this.focused="BUTTON"!=e.target.nodeName&&t,t||this.onMouseLeave(e)}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case 77:this.player.muted=!this.player.muted;break;case 67:this.player.captioning.hidden=!this.player.captioning.hidden;break;case 70:this.player.displayState==this.player.displayState=="full-screen"?this.player.exitFullScreen():this.player.enterFullScreen()}if(0!=this.focused)switch(e.keyCode){case 13:case 32:this.togglePlayPause();break;case 39:case 37:this.refs.volume.focused===!1&&this.refs.progress.onKeyDown(e);break;case 38:case 40:this.refs.progress.focused===!1&&this.refs.volume.onKeyDown(e)}}},{key:"contextMenuClick",value:function(e){return!/selectable/.test(e.target.className)&&(this.removeContextMenu(e),!1)}},{key:"removeContextMenu",value:function(e){document.body.removeEventListener("click",this.contextMenuClick);var t=document.body;t.removeChild(this.contextMenu),this.contextMenu=null}},{key:"onContextMenu",value:function(e){if(this.debug!==!0){e.preventDefault();var t=document.body,a=React.createElement(ee,{player:this.player,x:e.pageX,y:e.pageY});null!=this.contextMenu&&this.removeContextMenu(),this.contextMenu=document.createElement("div"),t.appendChild(this.contextMenu),document.body.addEventListener("click",this.contextMenuClick),ReactDOM.render(a,this.contextMenu)}}},{key:"replay",value:function(){this.player.replay()}},{key:"render",value:function(){return React.createElement(n,{ref:"container",tabIndex:"0",style:{display:"none"},classList:["amp-react","amp-ui","amp-ready","amp-active"],onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onContextMenu:this.onContextMenu},React.createElement("div",{className:"amp-interactive",onClick:this.onClick}),React.createElement($,{ref:"poster"}),React.createElement(J,{ref:"title"}),React.createElement(te,{ref:"ads"}),React.createElement(r,{ref:"pauseOverlay"}),React.createElement(o,{ref:"bufferingOverlay"}),React.createElement(y,{ref:"progress"}),React.createElement(n,{ref:"controls",className:"amp-controls amp-bar"},React.createElement(l,{ref:"playpause"}),React.createElement(X,{ref:"jumpback"}),React.createElement(Z,{ref:"jumpforward"}),React.createElement("div",{ref:"timeDisplay",className:"amp-time-display"},React.createElement(u,{ref:"currentTime"}),React.createElement("span",{ref:"timeSeparator",className:"amp-time-separator"}),React.createElement(h,{ref:"duration"}),React.createElement(p,{ref:"live"})),React.createElement(m,{ref:"mute"}),React.createElement(d,{ref:"volume"}),React.createElement("div",{ref:"spacerLeft",className:"amp-spacer"}),React.createElement("div",{ref:"spacerRight",className:"amp-spacer"}),React.createElement(W,{ref:"share",panel:"sharePanel"}),React.createElement(Y,{ref:"cc"}),React.createElement(k,{ref:"settings",panel:"settingsPanel"}),React.createElement(ne,{ref:"pip"}),React.createElement(ae,{ref:"airplay"}),React.createElement(se,{ref:"chromecast"}),React.createElement(v,{ref:"fullscreen"})),React.createElement(g,{ref:"unmute"}),React.createElement(z,{ref:"sharePanel"}),React.createElement(V,{ref:"settingsPanel"}),React.createElement(Q,{ref:"error"}),this.state.contextMenu)}},{key:"destroy",value:function(){ReactDOM.unmountComponentAtNode(this._container)}},{key:"adMode",get:function(){return null!=this.config.adMode?this.config.adMode:ie.AUTO}},{key:"debug",get:function(){return null!=this.config.debug?this.config.debug:this.player.config.debug}},{key:"container",get:function(){return this.refs.container}},{key:"ads",get:function(){return this.refs.ads}},{key:"components",get:function(){return this.refs}},{key:"controls",get:function(){return this.refs.controls}},{key:"mode",get:function(){return this.state.mode||ie.AUTO},set:function(e){var t,a=this;e=e||ie.AUTO;var n=this.state.mode;this.container.classList.update((t={},babelHelpers.defineProperty(t,"amp-controls-"+n,!1),babelHelpers.defineProperty(t,"amp-controls-"+e,!0),t)),this.setState({mode:e}),e===ie.AUTO?(null!=this.idleUtil||this.isTouchDevice||(this.idleUtil=new akamai.amp.IdleUtil(this.player.viewComponent,1e3*this.autoHide),this.idleUtil.addEventListener("activechange",function(e){var t=a.activeState==le.INACTIVE?le.IDLE:le.INACTIVE;a.activeState=e.detail.active!==!0?t:le.ACTIVE})),null!=this.idleUtil&&this.idleUtil.start()):null!=this.idleUtil&&this.idleUtil.stop(),this.player.container.classList.remove("amp-controls-"+n),this.player.container.classList.add("amp-controls-"+e)}},{key:"dragging",get:function(){return this.state.dragging},set:function(e){1==e?this.stopIdleTimeout():this.startIdleTimeout(),this.container.classList.update(babelHelpers.defineProperty({},"amp-dragging",e)),this.setState({dragging:e})}},{key:"open",get:function(){return this.state.open},set:function(e){this.container.classList.update(babelHelpers.defineProperty({},"amp-open",e)),this.setState({open:e})}},{key:"activeState",set:function(e){var t=e==le.ACTIVE,a=e==le.INACTIVE,n=e==le.IDLE;this.container.classList.update({"amp-active":t,"amp-inactive":a,"amp-idle":n});var s=t?"add":"remove";if(this.player.container.classList[s]("amp-active"),s=a?"add":"remove",this.player.container.classList[s]("amp-inactive"),a===!0){for(var i in this.refs){var l=this.refs[i];l instanceof C&&l.open===!0&&(l.open=!1)}this.startIdleTimeout()}},get:function(){switch(!0){case this.container.classList.contains("amp-active"):return le.ACTIVE;case this.container.classList.contains("amp-inactive"):return le.INACTIVE;default:return le.IDLE}}},{key:"adInProgress",get:function(){return this.player.ads&&this.player.ads.inProgress}}],[{key:"create",value:function(e,a,n){if(a.native===!0){var s={config:a};return e.once("ready",function(){return e.mediaElement.controls=!0}),null!=e.ads&&(s.ads={container:document.createElement("div")},e.container.appendChild(s.ads.container)),Promise.resolve(s)}return new Promise(function(n,s){e.once("ready",function(){null!=e.mediaElement.setPlayerProperty&&e.mediaElement.setPlayerProperty("controlsMode","none")});var i=ReactDOM.render(React.createElement(t,{player:e,config:a}),e.container);e.adContainer=i.ads.container,n(i)})}},{key:"childContextTypes",get:function(){return{player:PropTypes.object,config:PropTypes.object,plugin:PropTypes.object}}}]),t}(a);akamai.amp.AMP.registerPlugin("react",["html","flash","external"],re.create),e.UI=re,e.Component=a,e.Container=n,e.ClassList=t,e.Panel=C,e.PanelMenu=H,e.PanelControl=i,e.ListItem=_,e.Mode=ie}(this.akamai.amp.react=this.akamai.amp.react||{});
//# sourceMappingURL=React.min.js.map