{"version":3,"file":"Chromecast.js","sources":["../../../../src/ChromecastConstants.js","../../../../src/AmpCafSenderCaptioning.js","../../../../src/AmpCafSender.js","../../../../src/Chromecast.js","../../../../src/main.js"],"sourcesContent":["export default class ChromecastConstants {\n\n  static get ID() {\n    return \"chromecast\"\n  }\n\n  static get CHANNEL_ID() {\n    return \"urn:x-cast:com.akamai.amp.cast\"\n  }\n\n  static get APPLICATION_ID() {\n    return \"CC1AD845\"\n  }\n\n  static get SUPPORTED_TYPES() {\n    return [\n      akamai.amp.Utils.mimeTypes.m3u8,\n      akamai.amp.Utils.mimeTypes.mp4,\n      akamai.amp.Utils.mimeTypes.mpd,\n      akamai.amp.Utils.mimeTypes.ism,\n      akamai.amp.Utils.mimeTypes.webm,\n      akamai.amp.Utils.mimeTypes.mp3\n    ]\n  }\n}\n","export default class AmpCafSenderCaptioning extends akamai.amp.EventDispatcher {\n\n  constructor(player) {\n    super()\n    this.player = player.player\n    this.plugin = player.plugin\n    this._hidden = this.player.captioning.hidden\n    this._tracks = []\n    this.onEditTracksInfoSuccess = this.onEditTracksInfoSuccess.bind(this)\n    this.onEditTracksInfoError = this.onEditTracksInfoError.bind(this)\n\n    this.autoSelectTrack()\n    this.hidden = this.player.hidden\n  }\n\n  get tracks() {\n    const mediaSession = this.plugin.mediaSession\n    if (mediaSession == null || mediaSession.media == null || mediaSession.media.tracks == null) {\n      return []\n    }\n    return mediaSession.media.tracks.filter((track) => (track.subtype == chrome.cast.media.TextTrackType.CAPTIONS) ? track : null)\n  }\n\n  get track() {\n    return this._track || {}\n  }\n\n  set track(value) {\n    this._track = value\n  }\n\n  get hidden() {\n    return this._hidden\n  }\n\n  set hidden(value) {\n    if (value == this._hidden) {\n      return\n    }\n    this._hidden = value\n\n    const activeTrackIds = (value) ? [] : [this.track.trackId]\n    const tracksInfoRequest = new chrome.cast.media.EditTracksInfoRequest(activeTrackIds)\n    this.plugin.mediaSession.editTracksInfo(tracksInfoRequest, this.onEditTracksInfoSuccess, this.onEditTracksInfoError)\n\n    this.dispatch(\"visibilitychange\", !this._hidden)\n  }\n\n  onEditTracksInfoSuccess(event) {\n\n  }\n\n  onEditTracksInfoError(event) {\n\n  }\n\n  selectTrackByLanguage(lang) {\n    const track = this.tracks.filter((track) => (track.language === lang))[0]\n    if (track != null) {\n      this.track = track\n    }\n    return track\n  }\n\n  changeSettings(obj) {\n\n  }\n\n  autoSelectTrack() {\n    let lang = this.player.language\n    let track = null\n\n    if (lang != null) {\n      lang = lang.split(\"-\").shift()\n      track = this.selectTrackByLanguage(lang)\n    }\n\n    return track\n  }\n}\n","import AmpCafSenderCaptioning from \"./AmpCafSenderCaptioning\"\n\nexport default class AmpCafSender extends akamai.amp.EventDispatcher {\n\n  constructor(plugin) {\n    super()\n    cast.framework.setLoggerLevel(plugin.debug ? cast.framework.LoggerLevel.DEBUG : cast.framework.LoggerLevel.NONE)\n\n    this.player = plugin.player\n    this.config = akamai.amp.Utils.clone(this.player.config)\n    this.plugin = plugin\n    this.state = {\n      playState: akamai.amp.PlayState.READY,\n      waiting: false,\n      seeking: false\n    }\n\n    this.onRemotePlayerChange = this.onRemotePlayerChange.bind(this)\n    this.onMediaSession = this.onMediaSession.bind(this)\n    this.onMediaSession()\n\n    this.plugin.castSession.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION, this.onMediaSession)\n\n    this.createElements()\n    this.loadPlugins()\n      .then(() => {\n        this.dispatch(akamai.amp.Events.READY)\n        this.dispatch(akamai.amp.Events.MEDIA_CHANGE, this.media)\n        this.dispatch(akamai.amp.Events.CAN_PLAY_THROUGH)\n      })\n  }\n\n  createElements() {\n    this.container = document.createElement(\"div\")\n    this.container.className = \"amp-chromecast-sender\"\n    this.player.container.appendChild(this.container)\n\n    this.message = document.createElement(\"div\")\n    this.message.className = \"amp-chromecast-sender-msg\"\n    const element = document.createElement(\"div\")\n    element.className = \"amp-chromecast-sender-text\"\n    element.innerHTML = this.getLocalizedString(\"MSG_CHROMECAST_MESSAGE\", {device: this.plugin.castSession.getCastDevice().friendlyName})\n    this.message.appendChild(element)\n    this.player.container.appendChild(this.message)\n  }\n\n  loadPlugins() {\n    this.chromecast = {\n      available: true,\n      launch: () => this.plugin.launch()\n    }\n\n    if (this.player.captioning != null) {\n      this.captioning = new AmpCafSenderCaptioning(this)\n    }\n\n    this.localization = {\n      getLanguageString: (lang) => this.player.localization.getLanguageString(lang),\n      getString: (key) => this.player.localization.getString(key)\n    }\n\n    const type = this.player.mode\n    const key = \"react\"\n    const def = akamai.amp.AMP.plugins[key][type]\n    const config = this.config.plugins.react\n    config.mode = akamai.amp.react.Mode.PERSISTENT\n\n    if (def == null) {\n      throw new Error(`[AMP] Plugin could not be found: ${key}`)\n    }\n\n    return def(this, config, key)\n      .then((plugin) => {\n        this[key] = plugin\n        if (plugin.feature != null) {\n          this[plugin.feature] = plugin\n        }\n        plugin.container.classList.add(\"amp-remote-playback\")\n        this.logger.log(`[AMP] Plugin registered: ${key}`)\n      })\n      .catch((error) => this.logger.error(error))\n  }\n\n  onRemotePlayerChange(event) {\n    this.logger.log(\"[AMP CHROMECAST EVENT]\", event.field, event.value)\n\n    const type = cast.framework.RemotePlayerEventType\n    const amp = akamai.amp.Events\n    const value = event.value\n\n    switch (event.field) {\n      case \"mediaInfo\":\n        if (this.state.media == null && value != null) {\n          this.state.media = value\n          this.playState = this.remotePlayer.playerState.toLowerCase()\n          this.dispatch(akamai.amp.Events.DURATION_CHANGE, value.duration)\n          if (value.customData && value.customData.media) {\n            const media = value.customData.media\n            this.dispatch(akamai.amp.Events.TEMPORAL_TYPE_CHANGE, media.temporalType)\n            this.dispatch(akamai.amp.Events.IS_LIVE, media.isLive)\n          }\n          this.dispatch(akamai.amp.Events.MEDIA_CHANGE, value)\n        }\n        else if (value == null) {\n          this.state.media = null\n        }\n      break\n\n      case \"isMediaLoaded\":\n        if (value === false) {\n          this.playState = akamai.amp.PlayState.ENDED\n        }\n      break\n\n      case \"currentTime\":\n        if (this.seeking === true) {\n          this.dispatch(akamai.amp.Events.CAN_PLAY_THROUGH)\n          this.dispatch(akamai.amp.Events.SEEKED)\n          this.state.seeking = false\n        }\n\n        if (this.waiting === true) {\n          this.waiting = false\n        }\n\n        this.dispatch(amp.TIME_UPDATE, this.currentTime)\n      break\n\n      case \"duration\":\n        this.dispatch(amp.DURATION_CHANGE, this.duration)\n      break\n\n      case \"volumeLevel\":\n        this.dispatch(amp.VOLUME_CHANGE, this.volume)\n      break\n\n      case \"isMuted\":\n        this.dispatch(amp.VOLUME_CHANGE, (value) ? 0 : this.volume)\n        this.dispatch(amp.MUTE_CHANGE, this.muted)\n      break\n\n      case \"playerState\":\n        let state = null\n\n        switch (value) {\n          case chrome.cast.media.PlayerState.PLAYING:\n            state = akamai.amp.PlayState.PLAYING\n          break\n\n          case chrome.cast.media.PlayerState.PAUSED:\n            state = akamai.amp.PlayState.PAUSED\n          break\n\n          case chrome.cast.media.PlayerState.BUFFERING:\n            this.waiting = true\n          break\n        }\n\n        if (state) {\n          this.playState = state\n        }\n      break\n    }\n    this.dispatch(event)\n  }\n\n  onMediaSession(event) {\n    this.logger.log(\"[AMP CHROMECAST EVENT]\", event)\n\n    if (this.remotePlayerController != null) {\n      this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE, this.onRemotePlayerChange)\n    }\n    this.remotePlayer = new cast.framework.RemotePlayer()\n    this.remotePlayerController = new cast.framework.RemotePlayerController(this.remotePlayer)\n    this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE, this.onRemotePlayerChange)\n    this.dispatch(event)\n  }\n\n  /**\n   *\n   */\n  evaluateBindings(value, context) {\n    const data = {\n      media: this.media,\n      player: {\n        mode: \"html5\"\n      },\n      now: Date.now()\n    }\n    return akamai.amp.DataBinding.evaluateBindings(value, akamai.amp.Utils.override(data, context))\n  }\n\n  get mediaElement() {\n    return {}\n  }\n\n  get logger() {\n    return this.plugin.logger\n  }\n\n  set currentTime(value) {\n    if (value == this.state.currentTime) {\n      return\n    }\n\n    this.state.seeking = true\n    this.state.currentTime = value\n    this.remotePlayer.currentTime = value\n    if (this.paused === false)\n      this.dispatch(akamai.amp.Events.SEEKING)\n    this.remotePlayerController.seek()\n  }\n\n  get currentTime() {\n    return this.remotePlayer.currentTime\n  }\n\n  get duration() {\n    return this.remotePlayer.duration\n  }\n\n  set autoplay(value) {\n\n  }\n\n  get autoplay() {\n    return true\n  }\n\n  set media(value) {\n    this.plugin.load(this.player.defaultMediaTransform(value))\n  }\n\n  get media() {\n    const session = this.plugin.mediaSession\n    return (session != null && session.media.customData != null) ? session.media.customData.media : this.player.media\n  }\n\n  set volume(value) {\n    this.remotePlayer.volumeLevel = value\n    this.remotePlayerController.setVolumeLevel()\n  }\n\n  get volume() {\n    return this.remotePlayer.volumeLevel\n  }\n\n  set muted(value) {\n    this.remotePlayerController.muteOrUnmute()\n  }\n\n  get muted() {\n    return this.remotePlayer.isMuted\n  }\n\n  set playbackRate(value) {\n\n  }\n\n  get playbackRate() {\n    return 1\n  }\n\n  set waiting(value) {\n    if (value == this.state.waiting) {\n      return\n    }\n\n    this.state.waiting = value\n    if (value) {\n      this.dispatch(akamai.amp.Events.WAITING)\n    }\n  }\n\n  get waiting() {\n    return this.state.waiting\n  }\n\n  get seeking() {\n    return this.state.seeking\n  }\n\n  get paused() {\n    return this.remotePlayer.isPaused\n  }\n\n  get ended() {\n    return false\n  }\n\n  set quality(value) {\n    return\n  }\n\n  get quality() {\n    return 0\n  }\n\n  get qualityMode() {\n    return \"auto\"\n  }\n\n  get qualityLevels() {\n    return []\n  }\n\n  get audioTracks() {\n    return []\n  }\n\n  set playState(value) {\n    const previous = this.state.playState\n    if (value == previous) {\n      return\n    }\n    this.state.playState = value\n    this.dispatch(akamai.amp.Events.PLAY_STATE_CHANGE, {previous, value})\n\n    switch (value) {\n      case akamai.amp.PlayState.PLAYING:\n        this.dispatch(akamai.amp.Events.PLAYING)\n      break\n\n      case akamai.amp.PlayState.PAUSED:\n        this.dispatch(akamai.amp.Events.PAUSE)\n      break\n\n      case akamai.amp.PlayState.ENDED:\n        this.dispatch(akamai.amp.Events.ENDED)\n      break\n    }\n  }\n\n  get playState() {\n    return this.state.playState\n  }\n\n  get viewComponent() {\n    return this.container\n  }\n\n  get settings() {\n    return this.player.settings\n  }\n\n  play() {\n    this.remotePlayerController.playOrPause()\n  }\n\n  pause() {\n    this.remotePlayerController.playOrPause()\n  }\n\n  goLive() {\n\n  }\n\n  getLocalizedString(value, context) {\n    return this.player.getLocalizedString(value, context)\n  }\n\n  destroy() {\n    if (this.remotePlayerController != null) {\n      this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE, this.onRemotePlayerChange)\n    }\n    this.plugin.castSession.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION, this.onMediaSession)\n    this.player.container.removeChild(this.container)\n    this.player.container.removeChild(this.message)\n  }\n}\n","import ChromecastConstants from \"./ChromecastConstants\"\nimport AmpCafSender from \"./AmpCafSender\"\n\nexport default class Chromecast extends akamai.amp.Plugin {\n\n  constructor(player, config) {\n    super(player, config)\n\n    this._available = false\n  }\n\n  onready() {\n    this.bindHandlers([\"onCastApiAvailable\", \"onCastStateChanged\", \"onSessionStateChanged\", \"onMediaSession\"])\n    window['__onGCastApiAvailable'] = this.onCastApiAvailable\n\n    this.player.loadResources(this.config.sdk)\n  }\n\n  get available() {\n    return this._available\n  }\n\n  setAvailable(value) {\n    if (value === this._available) {\n      return\n    }\n\n    this._available = value\n    this.player.dispatch(akamai.amp.Events.PLAYBACK_TARGET_AVAILABILITY_CHANGE, {target: ChromecastConstants.ID, available: value})\n  }\n\n  onCastApiAvailable(isAvailable) {\n    if (!isAvailable) {\n      return\n    }\n\n    this.castContext = cast.framework.CastContext.getInstance()\n\n    this.castContext.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED, this.onCastStateChanged)\n    this.castContext.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED, this.onSessionStateChanged)\n    this.castContext.setOptions({\n      receiverApplicationId: this.config.applicationId,\n      autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED\n    })\n  }\n\n  onCastStateChanged(event) {\n    this.setAvailable((event.castState !== cast.framework.CastState.NO_DEVICES_AVAILABLE))\n    this.dispatch(event)\n  }\n\n  onSessionStateChanged(event) {\n    let mediaSession = null\n\n    switch (event.sessionState) {\n      case cast.framework.SessionState.SESSION_STARTING:\n        this.player.pause()\n        this.player.busy = true\n      break\n\n      case cast.framework.SessionState.SESSION_RESUMED:\n        this.player.busy = true\n        this.castSession = event.session\n        mediaSession = event.session.getMediaSession()\n        if (mediaSession.media && this.player.media) {\n          const sources = (this.player.media.sources || []).map((source) => source.src)\n          sources.push(this.player.media.src)\n          if (sources.includes(mediaSession.media.contentId)) {\n            this.onMediaSession({mediaSession})\n          }\n        }\n      break\n\n      case cast.framework.SessionState.SESSION_STARTED:\n        this.castSession = event.session\n        this.castSession.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION, this.onMediaSession)\n        if (this.castSession.getMediaSession() == null) {\n          this.load(this.player.media, this.player.currentTime)\n        }\n      break\n\n      case cast.framework.SessionState.SESSION_ENDED:\n        mediaSession = event.session.getMediaSession()\n        if (mediaSession != null) {\n          this.player.currentTime = event.session.getMediaSession().currentTime\n        }\n        this.player.playbackTarget = \"amp\"\n      break\n    }\n    this.dispatch(event)\n  }\n\n  onMediaSession(event) {\n    this.mediaSession = event.mediaSession\n    this.player.playbackTarget = ChromecastConstants.ID\n    this.dispatch(event)\n  }\n\n  onplaybacktargetchange(event) {\n    if (event.detail.value === ChromecastConstants.ID) {\n      this.sender = new AmpCafSender(this)\n    }\n    else {\n      if (this.sender != null) {\n        this.sender.destroy()\n      }\n      this.player.busy = false\n    }\n  }\n\n  launch() {\n    this.castContext.requestSession()\n      .catch((error) => {\n        if (error != \"cancel\")\n          this.logger.error(error)\n      })\n  }\n\n  load(media, startTime = 0) {\n\n    if (media == null) {\n      return\n    }\n\n    const source = akamai.amp.Utils.selectSource(media.source, (type) => ChromecastConstants.SUPPORTED_TYPES.includes(type) ? \"maybe\" : \"\")\n\n    if (source == null) {\n      return\n    }\n\n    media.src = source.src\n    media.type = source.type\n\n    const metadata = new chrome.cast.media.GenericMediaMetadata()\n    metadata.title = media.title\n    metadata.subtitle = media.description\n    metadata.image = [new chrome.cast.Image(media.poster)]\n    metadata.releaseDate = (media.pubDate && media.pubDate.toISOString) ? media.pubDate.toISOString() : null\n\n    const mediaInfo = new chrome.cast.media.MediaInfo(source.src, source.type)\n    mediaInfo.duration = media.duration\n    mediaInfo.customData = {media}\n    mediaInfo.metadata = metadata\n\n    if (media.track && media.track.length > 0) {\n      mediaInfo.tracks = []\n      media.track.forEach((value, index) => {\n        const track = new chrome.cast.media.Track(index, chrome.cast.media.TrackType.TEXT)\n        track.subtype = chrome.cast.media.TextTrackType.CAPTIONS\n        track.name = amp.l10n.MSG_CLOSED_CAPTIONING\n        track.language = value.srclang\n        track.customData = value\n        track.trackContentId = value.src\n        track.trackContentType = value.type\n        mediaInfo.tracks.push(track)\n      })\n    }\n\n    const request = new chrome.cast.media.LoadRequest(mediaInfo)\n    request.currentTime = startTime\n\n    this.castSession.loadMedia(request)\n      .catch((error) => this.logger.error(error))\n  }\n}\n","import \"./main.less\"\nimport Chromecast from \"./Chromecast\"\n\nakamai.amp.AMP.registerPlugin(\"chromecast\", akamai.amp.Plugin.createFactory(Chromecast))\n\nexport {Chromecast}\n"],"names":["ChromecastConstants","akamai","amp","Utils","mimeTypes","m3u8","mp4","mpd","ism","webm","mp3","AmpCafSenderCaptioning","player","plugin","_hidden","captioning","hidden","_tracks","onEditTracksInfoSuccess","bind","onEditTracksInfoError","autoSelectTrack","event","lang","track","tracks","filter","language","obj","split","shift","selectTrackByLanguage","mediaSession","media","subtype","chrome","cast","TextTrackType","CAPTIONS","_track","value","activeTrackIds","trackId","tracksInfoRequest","EditTracksInfoRequest","editTracksInfo","dispatch","EventDispatcher","AmpCafSender","framework","setLoggerLevel","debug","LoggerLevel","DEBUG","NONE","config","clone","state","PlayState","READY","onRemotePlayerChange","onMediaSession","castSession","addEventListener","SessionEventType","MEDIA_SESSION","createElements","loadPlugins","then","Events","MEDIA_CHANGE","CAN_PLAY_THROUGH","container","document","createElement","className","appendChild","message","element","innerHTML","getLocalizedString","device","getCastDevice","friendlyName","chromecast","launch","localization","getLanguageString","key","getString","type","mode","def","AMP","plugins","react","Mode","PERSISTENT","Error","feature","classList","add","logger","log","catch","error","field","RemotePlayerEventType","playState","remotePlayer","playerState","toLowerCase","DURATION_CHANGE","duration","customData","TEMPORAL_TYPE_CHANGE","temporalType","IS_LIVE","isLive","ENDED","seeking","SEEKED","waiting","TIME_UPDATE","currentTime","VOLUME_CHANGE","volume","MUTE_CHANGE","muted","PlayerState","PLAYING","PAUSED","BUFFERING","remotePlayerController","removeEventListener","ANY_CHANGE","RemotePlayer","RemotePlayerController","context","data","Date","now","DataBinding","evaluateBindings","override","playOrPause","removeChild","paused","SEEKING","seek","load","defaultMediaTransform","session","volumeLevel","setVolumeLevel","muteOrUnmute","isMuted","WAITING","isPaused","previous","PLAY_STATE_CHANGE","PAUSE","settings","Chromecast","_available","bindHandlers","onCastApiAvailable","loadResources","sdk","PLAYBACK_TARGET_AVAILABILITY_CHANGE","target","ID","available","isAvailable","castContext","CastContext","getInstance","CastContextEventType","CAST_STATE_CHANGED","onCastStateChanged","SESSION_STATE_CHANGED","onSessionStateChanged","setOptions","applicationId","AutoJoinPolicy","ORIGIN_SCOPED","setAvailable","castState","CastState","NO_DEVICES_AVAILABLE","sessionState","SessionState","SESSION_STARTING","pause","busy","SESSION_RESUMED","getMediaSession","sources","map","source","src","push","includes","contentId","SESSION_STARTED","SESSION_ENDED","playbackTarget","detail","sender","destroy","requestSession","startTime","selectSource","SUPPORTED_TYPES","metadata","GenericMediaMetadata","title","subtitle","description","image","Image","poster","releaseDate","pubDate","toISOString","mediaInfo","MediaInfo","length","forEach","index","Track","TrackType","TEXT","name","l10n","MSG_CLOSED_CAPTIONING","srclang","trackContentId","trackContentType","request","LoadRequest","loadMedia","Plugin","registerPlugin","createFactory"],"mappings":"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"}