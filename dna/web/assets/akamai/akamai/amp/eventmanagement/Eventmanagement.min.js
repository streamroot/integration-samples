!function(t){"use strict";var e=function(t){function e(t,a){babelHelpers.classCallCheck(this,e);var n=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return n.poller=new akamai.amp.Poller,n.poller.ondatachange=function(t){var a=(t.detail||"").trim(),r=null;if(a==e.ON)r={id:e.ON};else for(var s=n.states,i=0,l=n.states.length;i<l;i++)if(s[i].id==a){r=s[i];break}null!=r&&(n.state=r)},n.states=a.states||[],n._state={},n.url=a.url,n.interval=a.interval||5,n.poster=document.createElement("img"),n.poster.className="amp-event-poster",n.transform=n.transform.bind(n),t.addTransform(akamai.amp.TransformType.MEDIA,n.transform),n}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"transform",value:function(t){var a=this;return new Promise(function(n,r){if(a.state.id===e.ON)return void n(t);var s=function r(s){s.detail.id==e.ON&&(a.removeEventListener(e.STATE_CHANGE,r),n(t))};a.addEventListener(e.STATE_CHANGE,s)})}},{key:"onready",value:function(){this.poller.start()}},{key:"url",set:function(t){this.poller.url=t},get:function(){return this.poller.url}},{key:"interval",get:function(){return this.poller.interval/1e3},set:function(t){this.poller.interval=1e3*t}},{key:"state",set:function(t){if(this._state!=t)switch(this._state=t,this.dispatchEvent(new akamai.amp.Event(e.STATE_CHANGE,t)),this._state.id){case"on":this.player.container.contains(this.poster)&&this.player.container.removeChild(this.poster),this.player.autoplay===!0&&this.player.play();break;default:null!=this._state.poster&&(this.poster.src=this._state.poster,this.player.container.appendChild(this.poster)),this.player.pause(),this.player.displayState=akamai.amp.DisplayState.NORMAL}},get:function(){return this._state}}],[{key:"ON",get:function(){return"on"}},{key:"STATE_CHANGE",get:function(){return"statechange"}}]),e}(akamai.amp.Plugin);akamai.amp.AMP.registerPlugin("eventmanagement",akamai.amp.Plugin.createFactory(e)),t.EventManagement=e}(this.akamai.amp.eventmanagement=this.akamai.amp.eventmanagement||{});
//# sourceMappingURL=Eventmanagement.min.js.map